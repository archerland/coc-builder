$map-width: 800px;

.map {
  position: relative;
  width: $map-width;
  height: $map-width;
  margin: 0 auto;

  .grid {
    pointer-events: none;
    position: absolute;
    z-index: 2;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-color: tint(green, 40%);
    background-size: percentage(1/40) percentage(1/40);
    @include background-image(
      linear-gradient(to left, rgba(255,255,255,.2) 5%, transparent 5%, transparent 95%, rgba(255,255,255,.2) 95%),
      linear-gradient(to top, rgba(255,255,255,.2) 5%, transparent 5%, transparent 95%, rgba(255,255,255,.2) 95%)
    );

    @include transition(all .4s .4s);

    .view-mode & {
      @include transform-style(preserve-3d);
      @include transform(translateY(-100px) rotateX(50deg) rotateZ(-45deg));
      box-shadow: -20px 20px 30px rgba(0,0,0,.5);
    }
  }

  span {
    display: block;
    position: absolute;
  }

  .placeholder {
    pointer-events: none;
    display: none;
    z-index: 2;
    background-color: transparentize(green, .5);
  }

  &.active .placeholder {
    display: block;
  }
}
